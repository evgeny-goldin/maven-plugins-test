<?xml version="1.0" encoding="UTF-8"?>

<project xmlns              = "http://maven.apache.org/POM/4.0.0"
         xmlns:xsi          = "http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation = "http://maven.apache.org/POM/4.0.0
                               http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.github.goldin.maven-plugins-test</groupId>
    <artifactId>copy-maven-plugin.issues.0.3</artifactId>
    <packaging>jar</packaging>
    <version>0.1-SNAPSHOT</version>
    <name>[${project.groupId}:${project.artifactId}:${project.version}]</name>


    <parent>
        <groupId>com.github.goldin.maven-plugins-test</groupId>
        <artifactId>copy-maven-plugin.issues</artifactId>
        <version>0.1-SNAPSHOT</version>
    </parent>


    <build>
        <plugins>
            <plugin>
                <groupId>com.github.goldin</groupId>
                <artifactId>sshexec-maven-plugin</artifactId>
                <version>${plugins-version}</version>
                <executions>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-648 -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-648</id>
                        <goals>
                            <goal>sshexec</goal>
                        </goals>
                        <phase>validate</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <location>${scpPathKey}</location>
                            <command>
                                rm -rf pl-*
                                ls -al
                            </command>
                            <echoCommands>true</echoCommands>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>com.github.goldin</groupId>
                <artifactId>copy-maven-plugin</artifactId>
                <version>${plugins-version}</version>
                <executions>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-393                  -->
                    <!-- "Support ssh key file authentication for networking operations" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-393</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-393/1</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <filtering>true</filtering>
                                    <filter>{{ files.findAll{ it.name == 'pom.xml' } }}</filter>
                                    <replaces>
                                        <replace>
                                            <from>&lt;</from>
                                            <to>[</to>
                                        </replace>
                                        <replace>
                                            <from>&gt;</from>
                                            <to>]</to>
                                        </replace>
                                    </replaces>
                                    <destFilePrefix>ppp-</destFilePrefix>
                                    <destFileExtension>txt</destFileExtension>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-393/1</targetPath>
                                    <file>${scpPathKey}/pl-393/1/ppp-pom.txt</file>
                                </resource>
                                <resource>
                                    <targetPath>${scpPathKeyPassphrase}/pl-393/2</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <filtering>true</filtering>
                                    <filter>{{ files.findAll{ it.name == 'pom.xml' } }}</filter>
                                    <replaces>
                                        <replace>
                                            <from>&lt;</from>
                                            <to>[</to>
                                        </replace>
                                        <replace>
                                            <from>&gt;</from>
                                            <to>]</to>
                                        </replace>
                                    </replaces>
                                    <destFilePrefix>ppp-</destFilePrefix>
                                    <destFileExtension>txt</destFileExtension>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-393/2</targetPath>
                                    <file>${scpPathKeyPassphrase}/pl-393/2/ppp-pom.txt</file>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-672                                                -->
                    <!-- "pl-672 Respect <preservePath> when uploading directories to remote ftp and scp destinations" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-672</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>

                                <!-- Uploading a file, preservePath -->
                                <resource>
                                    <targetPath>${scpPathKey}/pl-672/file preserve</targetPath>
                                    <directory>${outputDirectory}</directory>
                                    <include>pl-393/1/ppp-pom.txt</include>
                                    <preservePath>true</preservePath>
                                </resource>
                                <!-- Uploading a file, no preservePath -->
                                <resource>
                                    <targetPath>${scpPathKey}/pl-672/file no preserve</targetPath>
                                    <directory>${outputDirectory}</directory>
                                    <include>pl-393/1/ppp-pom.txt</include>
                                </resource>
                                <!-- Uploading a directory, preservePath -->
                                <resource>
                                    <targetPath>${scpPathKey}/pl-672/dir preserve</targetPath>
                                    <directory>${outputDirectory}</directory>
                                    <preservePath>true</preservePath>
                                </resource>
                                <!-- Uploading a directory, no preservePath -->
                                <resource>
                                    <targetPath>${scpPathKey}/pl-672/dir no preserve</targetPath>
                                    <directory>${outputDirectory}</directory>
                                </resource>

                                <!-- Downloading a file, preservePath -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-672/1</targetPath>
                                    <file>${scpPathKey}/pl-672/file preserve/pl-393/1/ppp-pom.txt</file>
                                </resource>
                                <!-- Downloading a file, no preservePath -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-672/2</targetPath>
                                    <file>${scpPathKey}/pl-672/file no preserve/ppp-pom.txt</file>
                                </resource>
                                <!-- Downloading a directory, preservePath -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-672/3/1</targetPath>
                                    <file>${scpPathKey}/pl-672/dir preserve/pl-393/1/ppp-pom.txt</file>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-672/3/2</targetPath>
                                    <file>${scpPathKey}/pl-672/dir preserve/pl-393/2/ppp-pom.txt</file>
                                </resource>
                                <!-- Downloading a directory, no preservePath -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-672/4</targetPath>
                                    <file>${scpPathKey}/pl-672/dir no preserve</file>
                                </resource>

                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-687  -->
                    <!-- Provide a way to set files permissions (chmod)  -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-687</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ${isLinux} || ${isMac} }}</runIf>
                            <resources>
                                <!-- Setting chmod of files copied -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-687/1</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <chmod>555</chmod>
                                    <process>{{ assert 'ls -l ${outputDirectory}/pl-687/1/pom.xml'.execute().text.startsWith( '-r-xr-xr-x' ) }}</process>
                                </resource>
                                <!-- Setting chmod of archive created -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-687/2.zip</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <pack>true</pack>
                                    <chmod>666</chmod>
                                    <process>{{ assert 'ls -l ${outputDirectory}/pl-687/2.zip'.execute().text.startsWith( '-rw-rw-rw-' ) }}</process>
                                </resource>
                                <!-- Setting chmod of files unpacked -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-687/2.zip-unpacked</targetPath>
                                    <file>${outputDirectory}/pl-687/2.zip</file>
                                    <unpack>true</unpack>
                                    <chmod>777</chmod>
                                    <process>{{ assert 'ls -l ${outputDirectory}/pl-687/2.zip-unpacked/pom.xml'.execute().text.startsWith( '-rwxrwxrwx' ) }}</process>
                                </resource>
                                <!-- Setting chmod of files packed -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-687/3.tar.gz</targetPath>
                                    <directory>${project.basedir}/</directory>
                                    <include>pom.xml|444</include>
                                    <pack>true</pack>
                                    <process>
                                    {{
                                        'tar -xzf ${outputDirectory}/pl-687/3.tar.gz -C ${outputDirectory}/pl-687'.execute().text
                                        assert 'ls -l ${outputDirectory}/pl-687/pom.xml'.execute().text.startsWith( '-r--r--r--' )
                                    }}
                                    </process>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-689                                               -->
                    <!-- "files" <process> variable contains all files in a target directory when archive is unpacked -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-689</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-689/pack/1.zip</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-689/unpack</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <destFileName>1.txt</destFileName>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-689/unpack</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <destFileName>2.txt</destFileName>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-689/unpack</targetPath>
                                    <file>${outputDirectory}/pl-689/pack/1.zip</file>
                                    <unpack>true</unpack>
                                    <process>{{ assert files.size == 1 }}</process>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-686 -->
                    <!-- "Support <skipIdentical> for scp uploads"      -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-686-1</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-686</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <skipIdentical>true</skipIdentical>
                                    <skipIdenticalUseChecksum>true</skipIdenticalUseChecksum>
                                </resource>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-686</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <skipIdentical>true</skipIdentical>
                                </resource>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-686</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <skipIdentical>true</skipIdentical>
                                    <skipIdenticalUseChecksum>true</skipIdenticalUseChecksum>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-686-2</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <skipIdentical>true</skipIdentical>
                            <resource>
                                <targetPath>${scpPathKey}/pl-686</targetPath>
                                <file>${project.basedir}/pom.xml</file>
                            </resource>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-686-3</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <skipIdentical>true</skipIdentical>
                            <skipIdenticalUseChecksum>true</skipIdenticalUseChecksum>
                            <resource>
                                <targetPath>${scpPathKey}/pl-686</targetPath>
                                <file>${project.basedir}/pom.xml</file>
                            </resource>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-685                        -->
                    <!-- "Allow to specify whether checksum is used for <skipIdentical> check" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-685-1</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <description>pl-685-1-1</description>
                                    <targetPath>${outputDirectory}/pl-685</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <process>{{ assert files.size() == 1 }}</process>
                                </resource>
                                <resource>
                                    <description>pl-685-1-2</description>
                                    <targetPath>${outputDirectory}/pl-685</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <skipIdentical>true</skipIdentical>
                                    <skipIdenticalUseChecksum>true</skipIdenticalUseChecksum>
                                    <process>{{ assert ! files }}</process>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-685-2</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <skipIdentical>true</skipIdentical>
                            <skipIdenticalUseChecksum>true</skipIdenticalUseChecksum>
                            <resource>
                                <description>pl-685-2</description>
                                <targetPath>${outputDirectory}/pl-685</targetPath>
                                <file>${project.basedir}/pom.xml</file>
                                <process>{{ assert ! files }}</process>
                            </resource>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-685-3</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <skipIdentical>true</skipIdentical>
                            <resource>
                                <description>pl-685-3</description>
                                <targetPath>${outputDirectory}/pl-685</targetPath>
                                <file>${project.basedir}/pom.xml</file>
                                <process>{{ assert ! files }}</process>
                            </resource>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-673                              -->
                    <!-- "Support creating remote directories for <mkdir> and scp upload operations" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-673</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-673/1/2/3/4/5/6/7/8/9</targetPath>
                                    <mkdir>true</mkdir>
                                </resource>
                                <resource>
                                    <targetPath>${scpPathKey}/pl-673/1/2/3/4</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-673</targetPath>
                                    <directory>${scpPathKey}/pl-673</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-387 -->
                    <!-- "SSH - use authentication infra of Maven"      -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-387</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>
                                <resource>
                                    <targetPath>${scpPathSettings}/pl-387</targetPath>
                                    <directory>${outputDirectory}</directory>
                                    <preservePath>true</preservePath>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-387</targetPath>
                                    <directory>${scpPathSettings}/pl-387</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-648                 -->
                    <!-- "Resource processing is not performed for remote targetPaths"  -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-648</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>
                                <!-- Uploading modified 'pom.xml' to FTP and SCP directories -->
                                <resource>
                                    <targetPath>${ftpPath}/pl-648, ${scpPath}/pl-648</targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <filtering>true</filtering>
                                    <filter>{{ files.findAll{ it.name == 'pom.xml' } }}</filter>
                                    <replaces>
                                        <replace>
                                            <from>&lt;</from>
                                            <to>[</to>
                                        </replace>
                                        <replace>
                                            <from>&gt;</from>
                                            <to>]</to>
                                        </replace>
                                    </replaces>
                                    <destFilePrefix>ppp-</destFilePrefix>
                                    <destFileExtension>txt</destFileExtension>
                                </resource>
                                <!-- Uploading modified dependencies to FTP and SCP directories -->
                                <resource>
                                    <targetPath>${ftpPath}/pl-648, ${scpPath}/pl-648</targetPath>
                                    <eliminateDuplicates>false</eliminateDuplicates>
                                    <dependencies>
                                        <dependency>
                                            <groupId>javax.servlet</groupId>
                                            <artifactId>servlet-api</artifactId>
                                            <version>2.2</version>
                                            <stripVersion>true</stripVersion>
                                        </dependency>
                                        <dependency>
                                            <groupId>javax.servlet</groupId>
                                            <artifactId>servlet-api</artifactId>
                                            <version>2.2</version>
                                            <destFileName>s.jar</destFileName>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <!-- Downloading files uploaded -->
                                <resource>
                                    <targetPath>${outputDirectory}/pl-648/ftp</targetPath>
                                    <directory>${ftpPath}/pl-648</directory>
                                    <include>ppp-pom.txt, servlet-api.jar, s.jar</include>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-648/scp</targetPath>
                                    <file>${scpPath}/pl-648/ppp-pom.txt</file>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-648/scp</targetPath>
                                    <file>${scpPath}/pl-648/servlet-api.jar</file>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-648/scp</targetPath>
                                    <file>${scpPath}/pl-648/s.jar</file>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-651                                   -->
                    <!-- "When mkdir true is specified, the scp target path is considered as local path"  -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-651</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>ftp://something</targetPath>
                                    <mkdir>true</mkdir>
                                    <failsWith>AssertionError</failsWith>
                                </resource>
                                <resource>
                                    <targetPath>http://something</targetPath>
                                    <mkdir>true</mkdir>
                                    <failsWith>AssertionError</failsWith>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-671  -->
                    <!-- "Respect <preservePath> when creating archives" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-671</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>
                                        ${outputDirectory}/pl-671/jar/2/3/1.jar,
                                        ${outputDirectory}/pl-671/jar/2/3/2.jar,
                                        ${outputDirectory}/pl-671/jar/2/3/3.jar,
                                        ${outputDirectory}/pl-671/jar/2/3/4.jar
                                    </targetPath>
                                    <file>${project.basedir}/pom.xml</file>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-671/war/1.war</targetPath>
                                    <directory>${outputDirectory}/pl-671/jar/2/3</directory>
                                    <include>*.jar</include>
                                    <prefix>WEB-INF/lib</prefix>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-671/war/2.war</targetPath>
                                    <directory>${outputDirectory}/pl-671</directory>
                                    <include>jar/**/*.jar</include>
                                    <prefix>WEB-INF/lib</prefix>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-671/1.war-unpacked</targetPath>
                                    <file>${outputDirectory}/pl-671/war/1.war</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-671/2.war-unpacked</targetPath>
                                    <file>${outputDirectory}/pl-671/war/2.war</file>
                                    <unpack>true</unpack>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-662                         -->
                    <!-- "CopyMojo doesn't honor destFileName when copying LATEST dependencies" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-662</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-662/1</targetPath>
                                    <dependency>
                                        <groupId>mysql</groupId>
                                        <artifactId>mysql-connector-java</artifactId>
                                        <version>5.1.21</version>
                                        <type>jar</type>
                                        <destFileName>mysql-foo.jar</destFileName>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-662/2</targetPath>
                                    <dependency>
                                        <groupId>mysql</groupId>
                                        <artifactId>mysql-connector-java</artifactId>
                                        <version>LATEST</version>
                                        <type>jar</type>
                                        <destFileName>mysql-foo.jar</destFileName>
                                    </dependency>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-666                                   -->
                    <!-- " stripVersion does not work when copying dependencies to remote server via ssh" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-666</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <resources>
                                <resource>
                                    <targetPath>${scpPath}/pl-666/1</targetPath>
                                    <dependency>
                                        <groupId>javax.servlet</groupId>
                                        <artifactId>servlet-api</artifactId>
                                        <version>2.2</version>
                                        <stripVersion>true</stripVersion>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${scpPath}/pl-666/2</targetPath>
                                    <dependency>
                                        <groupId>javax.servlet</groupId>
                                        <artifactId>servlet-api</artifactId>
                                        <version>2.2</version>
                                    </dependency>
                                    <stripVersion>true</stripVersion>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-666/1</targetPath>
                                    <file>${scpPath}/pl-666/1/servlet-api.jar</file>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-666/2</targetPath>
                                    <file>${scpPath}/pl-666/2/servlet-api.jar</file>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-664                                 -->
                    <!-- "Support <depth> argument to specify depth of transitive artifacts to collect" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-664</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <parallelDownload>true</parallelDownload>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/0-1</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>copy-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>0</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>assert-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>0</depth>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/0-2</targetPath>
                                    <dependency>
                                        <includeScope>compile</includeScope>
                                        <depth>0</depth>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/1-1</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>copy-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>1</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>assert-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>1</depth>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/1-2</targetPath>
                                    <dependency>
                                        <includeScope>compile</includeScope>
                                        <depth>1</depth>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/2-1</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>copy-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>2</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>assert-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>2</depth>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/2-2</targetPath>
                                    <dependency>
                                        <includeScope>compile</includeScope>
                                        <depth>2</depth>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/3-1</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>copy-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>3</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>assert-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>3</depth>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/3-2</targetPath>
                                    <dependency>
                                        <includeScope>compile</includeScope>
                                        <depth>3</depth>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-664/4</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>org.springframework.batch</groupId>
                                            <artifactId>spring-batch-infrastructure</artifactId>
                                            <version>2.1.9.RELEASE</version>
                                            <includeScope>compile</includeScope>
                                            <!--
Otherwise and exception is thrown:
Caused by: java.lang.IllegalArgumentException: Illegal character in path at index 82: http://evgenyg.artifactoryonline.com/evgenyg/repo/commons-lang/commons-lang/PLEASE DON'T USE COMMONS LANG/commons-lang-PLEASE DON'T USE COMMONS LANG.pom
                                             -->
                                            <excludeGroupIds>commons-lang</excludeGroupIds>
                                            <depth>3</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>copy-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>3</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.github.goldin</groupId>
                                            <artifactId>assert-maven-plugin</artifactId>
                                            <version>${plugins-version}</version>
                                            <includeScope>compile</includeScope>
                                            <depth>3</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>org.springframework</groupId>
                                            <artifactId>spring-jdbc</artifactId>
                                            <version>3.2.0.RELEASE</version>
                                            <includeScope>compile</includeScope>
                                            <depth>3</depth>
                                        </dependency>
                                        <dependency>
                                            <groupId>org.eclipse.hudson</groupId>
                                            <artifactId>hudson-war</artifactId>
                                            <version>3.0.0</version>
                                            <includeScope>compile</includeScope>
                                            <type>war</type>
                                            <depth>3</depth>
                                        </dependency>
                                    </dependencies>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-677                   -->
                    <!-- "Eliminate duplicates when <resource> dependencies are resolved" -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-677</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <parallelDownload>true</parallelDownload>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-677/1</targetPath>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.49</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.48</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.47</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.1</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.0</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.0.7</version>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-677/2</targetPath>
                                    <eliminateDuplicates>false</eliminateDuplicates>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.49</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.48</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.47</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.1</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.0</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.0.7</version>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-677/3</targetPath>
                                    <stripVersion>true</stripVersion>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.49</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.48</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.47</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.1</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.0</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.0.7</version>
                                        </dependency>
                                    </dependencies>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-677/4</targetPath>
                                    <eliminateDuplicates>false</eliminateDuplicates>
                                    <stripVersion>true</stripVersion>
                                    <dependencies>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.49</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.48</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jsch</artifactId>
                                            <version>0.1.47</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.1</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.1.0</version>
                                        </dependency>
                                        <dependency>
                                            <groupId>com.jcraft</groupId>
                                            <artifactId>jzlib</artifactId>
                                            <version>1.0.7</version>
                                        </dependency>
                                    </dependencies>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-677-2</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <eliminateDuplicates>false</eliminateDuplicates>
                            <resource>
                                <targetPath>${outputDirectory}/pl-677/5</targetPath>
                                <dependencies>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.49</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.48</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.47</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.1.1</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.1.0</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.0.7</version>
                                    </dependency>
                                </dependencies>
                            </resource>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-677-3</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <eliminateDuplicates>false</eliminateDuplicates>
                            <stripVersion>true</stripVersion>
                            <resource>
                                <targetPath>${outputDirectory}/pl-677/6</targetPath>
                                <dependencies>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.49</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.48</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jsch</artifactId>
                                        <version>0.1.47</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.1.1</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.1.0</version>
                                    </dependency>
                                    <dependency>
                                        <groupId>com.jcraft</groupId>
                                        <artifactId>jzlib</artifactId>
                                        <version>1.0.7</version>
                                    </dependency>
                                </dependencies>
                            </resource>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-678 -->
                    <!-- Allow to download dependencies in parallel     -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-678</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resource>
                                <targetPath>${outputDirectory}/pl-678/1</targetPath>
                                <parallelDownload>true</parallelDownload>
                                <dependency>
                                    <groupId>jboss</groupId>
                                    <artifactId>jboss-cache</artifactId>
                                    <version>1.2.2</version>
                                    <includeScope>compile,test</includeScope>
                                </dependency>
                            </resource>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-678-2</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <parallelDownload>true</parallelDownload>
                            <resource>
                                <targetPath>${outputDirectory}/pl-678/2</targetPath>
                                <dependency>
                                    <groupId>jboss</groupId>
                                    <artifactId>jboss-cache</artifactId>
                                    <version>1.2.2</version>
                                    <includeScope>compile,test</includeScope>
                                </dependency>
                            </resource>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-679                     -->
                    <!-- Treat transitive dependencies includeScope/excludeScope explicitly -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-679</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <parallelDownload>true</parallelDownload>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/1</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <includeScope>compile</includeScope>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/2</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <includeScope>compile,test</includeScope>
                                        <excludeGroupIds>com.sun.jmx,com.sun.jdmk</excludeGroupIds>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/3</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <includeScope>compile,test,provided</includeScope>
                                        <excludeGroupIds>com.sun.jmx,com.sun.jdmk</excludeGroupIds>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/4</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <includeScope>test</includeScope>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/5</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <includeScope>provided</includeScope>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/6</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <excludeScope>compile</excludeScope>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/7</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <excludeScope>test</excludeScope>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-679/8</targetPath>
                                    <dependency>
                                        <groupId>org.springframework</groupId>
                                        <artifactId>spring-context</artifactId>
                                        <version>${spring-version}</version>
                                        <excludeScope>compile,test</excludeScope>
                                    </dependency>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-667                                      -->
                    <!-- "Apply dependencies filtering while traversing the transitive dependencies tree"    -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-667</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resource>
                                <targetPath>${outputDirectory}/pl-667</targetPath>
                                <parallelDownload>true</parallelDownload>
                                <dependency>
                                    <groupId>org.jvnet.hudson.main</groupId>
                                    <artifactId>hudson-war</artifactId>
                                    <version>1.394</version>
                                    <type>war</type>
                                    <includeScope>compile,test</includeScope>
                                    <excludeGroupIds>com.bea.xml,ehcache</excludeGroupIds>
                                    <excludeArtifactIds>stapler,stax-ri</excludeArtifactIds>
                                    <applyWhileTraversing>true</applyWhileTraversing>
                                </dependency>
                            </resource>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-640 -->
                    <!-- Allow to specify custom archive formats        -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-640-ant</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <customArchiveFormats>
                                zip    = z1, z2
                                tar    = t
                                tar.gz = tz
                            </customArchiveFormats>
                            <useTrueZipForPack>false</useTrueZipForPack>
                            <useTrueZipForUnpack>false</useTrueZipForUnpack>
                            <resources>
                                <resource>
                                    <targetPaths>
                                        <targetPath>${outputDirectory}/pl-640/ant/1.z1</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/ant/1.z2</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/ant/1.t</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/ant/1.tz</targetPath>
                                    </targetPaths>
                                    <file>${project.basedir}/pom.xml</file>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/ant/z1</targetPath>
                                    <file>${outputDirectory}/pl-640/ant/1.z1</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/ant/z2</targetPath>
                                    <file>${outputDirectory}/pl-640/ant/1.z2</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/ant/t</targetPath>
                                    <file>${outputDirectory}/pl-640/ant/1.t</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/ant/tz</targetPath>
                                    <file>${outputDirectory}/pl-640/ant/1.tz</file>
                                    <unpack>true</unpack>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-640-truezip</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <customArchiveFormats>
                                zip    = z1, z2
                                tar    = t
                                tar.gz = tz
                            </customArchiveFormats>
                            <useTrueZipForPack>true</useTrueZipForPack>
                            <useTrueZipForUnpack>true</useTrueZipForUnpack>
                            <resources>
                                <resource>
                                    <targetPaths>
                                        <targetPath>${outputDirectory}/pl-640/truezip/1.z1</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/truezip/1.z2</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/truezip/1.t</targetPath>
                                        <targetPath>${outputDirectory}/pl-640/truezip/1.tz</targetPath>
                                    </targetPaths>
                                    <file>${project.basedir}/pom.xml</file>
                                    <pack>true</pack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/truezip/z1</targetPath>
                                    <file>${outputDirectory}/pl-640/truezip/1.z1</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/truezip/z2</targetPath>
                                    <file>${outputDirectory}/pl-640/truezip/1.z2</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/truezip/t</targetPath>
                                    <file>${outputDirectory}/pl-640/truezip/1.t</file>
                                    <unpack>true</unpack>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-640/truezip/tz</targetPath>
                                    <file>${outputDirectory}/pl-640/truezip/1.tz</file>
                                    <unpack>true</unpack>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-663                -->
                    <!-- Provide an option to strip timestamps from SNAPSHOT artifacts -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-663-1</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/1</targetPath>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                        <stripTimestamp>true</stripTimestamp>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/2</targetPath>
                                    <stripTimestamp>true</stripTimestamp>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/3</targetPath>
                                    <dependenciesAtM2>false</dependenciesAtM2>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                        <stripTimestamp>true</stripTimestamp>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/4</targetPath>
                                    <dependenciesAtM2>false</dependenciesAtM2>
                                    <stripTimestamp>true</stripTimestamp>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                    </dependency>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-663-2</id>
                        <goals>
                            <goal>copy</goal>
                        </goals>
                        <phase>initialize</phase>
                        <configuration>
                            <stripTimestamp>true</stripTimestamp>
                            <resources>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/5</targetPath>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                    </dependency>
                                </resource>
                                <resource>
                                    <targetPath>${outputDirectory}/pl-663/6</targetPath>
                                    <dependenciesAtM2>false</dependenciesAtM2>
                                    <dependency>
                                        <groupId>com.github.goldin.test</groupId>
                                        <artifactId>about-maven-plugin</artifactId>
                                        <version>0.3-20130115.225224-1</version>
                                    </dependency>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>com.github.goldin</groupId>
                <artifactId>assert-maven-plugin</artifactId>
                <version>${plugins-version}</version>
                <executions>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-648 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-393 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-672 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-673 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-387 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-666 -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-648</id>
                        <goals>
                            <goal>assert</goal>
                        </goals>
                        <phase>test</phase>
                        <configuration>
                            <runIf>{{ ftpTests }}</runIf>
                            <assertFiles>
                                ${outputDirectory}/pl-648/ftp/ppp-pom.txt
                                ${outputDirectory}/pl-648/ftp/servlet-api.jar
                                ${outputDirectory}/pl-648/ftp/s.jar

                                ${outputDirectory}/pl-648/scp/ppp-pom.txt
                                ${outputDirectory}/pl-648/scp/servlet-api.jar
                                ${outputDirectory}/pl-648/scp/s.jar

                                ${outputDirectory}/pl-393/1/ppp-pom.txt
                                ${outputDirectory}/pl-393/2/ppp-pom.txt

                                ${outputDirectory}/pl-672/1/ppp-pom.txt
                                ${outputDirectory}/pl-672/2/ppp-pom.txt
                                ${outputDirectory}/pl-672/3/1/ppp-pom.txt
                                ${outputDirectory}/pl-672/3/2/ppp-pom.txt
                                ${outputDirectory}/pl-672/4/ppp-pom.txt

                                ${outputDirectory}/pl-673/pom.xml
                                ${outputDirectory}/pl-387/pom.xml
                                ${outputDirectory}/pl-387/ppp-pom.txt

                                ${outputDirectory}/pl-666/1/servlet-api.jar
                                ${outputDirectory}/pl-666/2/servlet-api.jar
                            </assertFiles>
                            <assertEqual>
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-393/2

                                ${outputDirectory}/pl-672/1|${outputDirectory}/pl-672/2
                                ${outputDirectory}/pl-672/2|${outputDirectory}/pl-672/3/1
                                ${outputDirectory}/pl-672/3/1|${outputDirectory}/pl-672/3/2
                                ${outputDirectory}/pl-672/3/2|${outputDirectory}/pl-672/4
                                ${outputDirectory}/pl-672/4|${outputDirectory}/pl-672/1

                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-672/1
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-672/2
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-672/3/1
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-672/3/2
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-672/4

                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-648/scp|*.txt
                                ${outputDirectory}/pl-393/1|${outputDirectory}/pl-387|*.txt

                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-672/1
                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-672/2
                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-672/3/1
                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-672/3/2
                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-672/4

                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-648/scp|*.txt
                                ${outputDirectory}/pl-393/2|${outputDirectory}/pl-387|*.txt

                                ${outputDirectory}/pl-648/ftp|${outputDirectory}/pl-648/scp

                                ${outputDirectory}/pl-673|${project.basedir}|pom.xml
                                ${outputDirectory}/pl-387|${project.basedir}|pom.xml
                            </assertEqual>
                            <assertGroovy>
                                  new File( outputDirectory, 'pl-648/ftp/ppp-pom.txt' ).text.contains( '[name][com.github.goldin.maven-plugins-test:copy-maven-plugin.issues.0.2.5:0.1-SNAPSHOT][/name]' )
                                ! new File( outputDirectory, 'pl-648/ftp/ppp-pom.txt' ).text.contains( '&lt;' )
                                ! new File( outputDirectory, 'pl-648/ftp/ppp-pom.txt' ).text.contains( '&gt;' )

                                  new File( outputDirectory, 'pl-648/ftp/ppp-pom.txt' ).text.contains( '[name][com.github.goldin.maven-plugins-test:copy-maven-plugin.issues.0.2.5:0.1-SNAPSHOT][/name]' )
                                ! new File( outputDirectory, 'pl-648/scp/ppp-pom.txt' ).text.contains( '&lt;' )
                                ! new File( outputDirectory, 'pl-648/scp/ppp-pom.txt' ).text.contains( '&gt;' )
                            </assertGroovy>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-671 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-662 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-663 -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-671</id>
                        <goals>
                            <goal>assert</goal>
                        </goals>
                        <phase>test</phase>
                        <configuration>
                            <assertFiles>
                                ${outputDirectory}/pl-671/1.war-unpacked/WEB-INF/lib/1.jar
                                ${outputDirectory}/pl-671/1.war-unpacked/WEB-INF/lib/2.jar
                                ${outputDirectory}/pl-671/1.war-unpacked/WEB-INF/lib/3.jar
                                ${outputDirectory}/pl-671/1.war-unpacked/WEB-INF/lib/4.jar

                                ${outputDirectory}/pl-671/2.war-unpacked/WEB-INF/lib/jar/2/3/1.jar
                                ${outputDirectory}/pl-671/2.war-unpacked/WEB-INF/lib/jar/2/3/2.jar
                                ${outputDirectory}/pl-671/2.war-unpacked/WEB-INF/lib/jar/2/3/3.jar
                                ${outputDirectory}/pl-671/2.war-unpacked/WEB-INF/lib/jar/2/3/4.jar

                                ${outputDirectory}/pl-662/1/mysql-foo.jar
                                ${outputDirectory}/pl-662/2/mysql-foo.jar

                                ${outputDirectory}/pl-663/1/about-maven-plugin-0.3-SNAPSHOT.jar
                                ${outputDirectory}/pl-663/2/about-maven-plugin-0.3-SNAPSHOT.jar
                                ${outputDirectory}/pl-663/3/about-maven-plugin-0.3-SNAPSHOT.jar
                                ${outputDirectory}/pl-663/4/about-maven-plugin-0.3-SNAPSHOT.jar
                                ${outputDirectory}/pl-663/5/about-maven-plugin-0.3-SNAPSHOT.jar
                                ${outputDirectory}/pl-663/6/about-maven-plugin-0.3-SNAPSHOT.jar
                            </assertFiles>
                            <assertEqual>
                                ${outputDirectory}/pl-663/1|${outputDirectory}/pl-663/2
                                ${outputDirectory}/pl-663/2|${outputDirectory}/pl-663/3
                                ${outputDirectory}/pl-663/3|${outputDirectory}/pl-663/4
                                ${outputDirectory}/pl-663/4|${outputDirectory}/pl-663/5
                                ${outputDirectory}/pl-663/5|${outputDirectory}/pl-663/6
                                ${outputDirectory}/pl-663/6|${outputDirectory}/pl-663/1
                            </assertEqual>
                        </configuration>
                    </execution>
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-664 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-677 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-678 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-679 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-667 -->
                    <!-- http://evgeny-goldin.org/youtrack/issue/pl-640 -->
                    <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
                    <execution>
                        <id>http://evgeny-goldin.org/youtrack/issue/pl-664</id>
                        <goals>
                            <goal>assert</goal>
                        </goals>
                        <phase>test</phase>
                        <configuration>
                            <assertFiles>
                                ${outputDirectory}/pl-677/1/jsch-0.1.49.jar
                                ${outputDirectory}/pl-677/1/jzlib-1.1.1.jar

                                ${outputDirectory}/pl-677/2/jsch-0.1.49.jar
                                ${outputDirectory}/pl-677/2/jsch-0.1.48.jar
                                ${outputDirectory}/pl-677/2/jsch-0.1.47.jar

                                ${outputDirectory}/pl-677/2/jzlib-1.1.1.jar
                                ${outputDirectory}/pl-677/2/jzlib-1.1.0.jar
                                ${outputDirectory}/pl-677/2/jzlib-1.0.7.jar

                                ${outputDirectory}/pl-677/5/jsch-0.1.49.jar
                                ${outputDirectory}/pl-677/5/jsch-0.1.48.jar
                                ${outputDirectory}/pl-677/5/jsch-0.1.47.jar

                                ${outputDirectory}/pl-677/5/jzlib-1.1.1.jar
                                ${outputDirectory}/pl-677/5/jzlib-1.1.0.jar
                                ${outputDirectory}/pl-677/5/jzlib-1.0.7.jar

                                ${outputDirectory}/pl-677/3/jsch.jar
                                ${outputDirectory}/pl-677/3/jzlib.jar

                                ${outputDirectory}/pl-677/4/jsch.jar
                                ${outputDirectory}/pl-677/4/jzlib.jar

                                ${outputDirectory}/pl-677/6/jsch.jar
                                ${outputDirectory}/pl-677/6/jzlib.jar
                            </assertFiles>
                            <assertEqual>
                                ${outputDirectory}/pl-664/0-1|${outputDirectory}/pl-664/0-2
                                ${outputDirectory}/pl-664/1-1|${outputDirectory}/pl-664/1-2
                                ${outputDirectory}/pl-664/2-1|${outputDirectory}/pl-664/2-2
                                ${outputDirectory}/pl-664/3-1|${outputDirectory}/pl-664/3-2

                                ${outputDirectory}/pl-677/2|${outputDirectory}/pl-677/5
                                ${outputDirectory}/pl-677/4|${outputDirectory}/pl-677/6
                                ${outputDirectory}/pl-678/1|${outputDirectory}/pl-678/2

                                ${outputDirectory}/pl-679/5|${outputDirectory}/pl-679/8

                                ${outputDirectory}/pl-640/ant/z1|${outputDirectory}/pl-640/ant/z2
                                ${outputDirectory}/pl-640/ant/z2|${outputDirectory}/pl-640/ant/t
                                ${outputDirectory}/pl-640/ant/t|${outputDirectory}/pl-640/ant/tz
                                ${outputDirectory}/pl-640/ant/tz|${outputDirectory}/pl-640/truezip/z1
                                ${outputDirectory}/pl-640/truezip/z1|${outputDirectory}/pl-640/truezip/z2
                                ${outputDirectory}/pl-640/truezip/z2|${outputDirectory}/pl-640/truezip/t
                                ${outputDirectory}/pl-640/truezip/t|${outputDirectory}/pl-640/truezip/tz
                                ${outputDirectory}/pl-640/truezip/tz|${outputDirectory}/pl-640/ant/z1
                            </assertEqual>
                            <shouldFailAssertEqual>
                                ${outputDirectory}/pl-677/1|${outputDirectory}/pl-677/2
                                ${outputDirectory}/pl-677/2|${outputDirectory}/pl-677/3
                                <!-- Identically named files, different versions -->
                                ${outputDirectory}/pl-677/3|${outputDirectory}/pl-677/4
                                ${outputDirectory}/pl-677/3|${outputDirectory}/pl-677/6
                                ${outputDirectory}/pl-677/4|${outputDirectory}/pl-677/1
                                ${outputDirectory}/pl-677/6|${outputDirectory}/pl-677/1
                            </shouldFailAssertEqual>
                            <assertGroovy>
                                new File( outputDirectory, 'pl-664/0-1' ).list().size() == 2
                                new File( outputDirectory, 'pl-664/0-2' ).list().size() == 2
                                new File( outputDirectory, 'pl-664/1-1' ).list().size() == 6
                                new File( outputDirectory, 'pl-664/1-2' ).list().size() == 6
                                new File( outputDirectory, 'pl-664/2-1' ).list().size() == 54
                                new File( outputDirectory, 'pl-664/2-2' ).list().size() == 54
                                new File( outputDirectory, 'pl-664/3-1' ).list().size() == 94
                                new File( outputDirectory, 'pl-664/3-2' ).list().size() == 94
                                new File( outputDirectory, 'pl-664/4'   ).list().size() == 166

                                new File( outputDirectory, 'pl-677/1' ).list().size() == 2
                                new File( outputDirectory, 'pl-677/2' ).list().size() == 6
                                new File( outputDirectory, 'pl-677/3' ).list().size() == 2
                                new File( outputDirectory, 'pl-677/4' ).list().size() == 2
                                new File( outputDirectory, 'pl-677/5' ).list().size() == 6
                                new File( outputDirectory, 'pl-677/6' ).list().size() == 2

                                new File( outputDirectory, 'pl-678/1' ).list().size()   == 9
                                new File( outputDirectory, 'pl-678/2' ).list().size()   == 9
                                new File( outputDirectory, 'pl-678/1' ).directorySize() == 4586198
                                new File( outputDirectory, 'pl-678/2' ).directorySize() == 4586198

                                new File( outputDirectory, 'pl-679/1' ).list().size() == ${springCompileDependencies}
                                new File( outputDirectory, 'pl-679/2' ).list().size() == ${springCompileTestDependencies}
                                new File( outputDirectory, 'pl-679/3' ).list().size() == ${springCompileTestProvidedDependencies}
                                new File( outputDirectory, 'pl-679/4' ).list().size() == ${springTestDependencies}
                                new File( outputDirectory, 'pl-679/5' ).list().size() == ${springProvidedDependencies}
                                new File( outputDirectory, 'pl-679/6' ).list().size() == 15
                                new File( outputDirectory, 'pl-679/7' ).list().size() == 11
                                new File( outputDirectory, 'pl-679/8' ).list().size() == ${springProvidedDependencies}

                                new File( outputDirectory, 'pl-667' ).list().size() == 182

                                new File( outputDirectory, 'pl-640/ant/z1'     ).list().size() == 1
                                new File( outputDirectory, 'pl-640/ant/z2'     ).list().size() == 1
                                new File( outputDirectory, 'pl-640/ant/t'      ).list().size() == 1
                                new File( outputDirectory, 'pl-640/ant/tz'     ).list().size() == 1
                                new File( outputDirectory, 'pl-640/truezip/z1' ).list().size() == 1
                                new File( outputDirectory, 'pl-640/truezip/z2' ).list().size() == 1
                                new File( outputDirectory, 'pl-640/truezip/t'  ).list().size() == 1
                                new File( outputDirectory, 'pl-640/truezip/tz' ).list().size() == 1
                            </assertGroovy>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>com.github.goldin</groupId>
            <artifactId>copy-maven-plugin</artifactId>
            <version>${plugins-version}</version>
        </dependency>
        <dependency>
            <groupId>com.github.goldin</groupId>
            <artifactId>assert-maven-plugin</artifactId>
            <version>${plugins-version}</version>
        </dependency>
    </dependencies>
</project>
