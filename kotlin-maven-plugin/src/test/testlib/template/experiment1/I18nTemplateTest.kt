package template.experiment1

import kotlin.template.experiment1.*
import kotlin.test.assertEquals

import junit.framework.TestCase
import java.util.Date
import java.util.Locale

class I18nTemplateTest : TestCase() {
    fun testDefaultLocale() : Unit {
        format(I18nFormatter())
    }

    fun testFrance() : Unit {
        format(I18nFormatter(Locale.FRANCE.sure()))
    }

    fun testGermany() : Unit {
        format(I18nFormatter(Locale.GERMANY.sure()))
    }

    fun format(format: I18nFormatter): Unit {
        val name = "James"
        // TODO currently numbers cause: java.lang.ClassNotFoundException: jet.Number
        //val price: Double = 1.99
        val now = Date()


        // Code generated by the following template expression:
        //
        // val actual = format.toI18n("hello $name!")
        val actual = format.toString{
            it.text("hello ")
            it.expression(name)
/*
            it.text(" price ")
            it.expression(price)
*/
            it.text(" date ")
            it.expression(now)
        }

        println("Got text: $actual")
    }
}
